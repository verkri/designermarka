

MarkaCustomer:
  actAs: 
    Timestampable:
      created:
        name: created_at
        type: timestamp
      updated:
        disabled: true
  columns:
    name: { type: string(255), notnull: true }
    surname: { type: string(255), notnull: true }
    email: { type: string(100), notnull: true, email: true }
    telephone: { type: string(15), notnull: true }
    country:  { type: string(100), notnull: true }
    state: { type: string(100) }
    zipcode: { type: integer }
    city: { type: string(100), notnull: true }
    address: { type: string(255), notnull: true }
  relations:
    Orders:
      type: many
      class: MarkaOrder
      local: id
      foreign: customer_id
        
MarkaOrder:
  actAs: { Timestampable: ~ }
  columns:
    pending: { type: boolean, notnull: true, default: 1 }
    shipped: { type: boolean, notnull: true, default: 0 }
    customer_id: { type: integer, notnull: true }
  relations:
    Customer: 
      class: MarkaCustomer
      local: customer_id
      foreign: id
      onDelete: CASCADE
      
MarkaOrderDetails:
  columns:
    order_id:  { type: integer, primary: true }
    product_id: { type: integer, primary: true }
    quantity: { type: integer, notnull: true, default: 1 }
    cadprice: { type: integer, notnull: true }
  relations:
    Order:  { class: MarkaOrder, onDelete: CASCADE, local: order_id, foreign: id }
    Product: { class: MarkaProduct, onDelete: CASCADE, local: product_id, foreign: id }

# FIXTURES:
MarkaCustomer:
  cust_0:
    name: Krisztian
    surname: Veress
    email: verkri@inf.u-szeged.hu
    telephone: 36203230390
    country: Hungary
    state: Csongrad
    zipcode: 6725
    city: Szeged
    address: Kormanyos u 11.
  cust_1:
    name: Dora
    surname: Pajti
    email: dora.pajti@gmail.com
    telephone: 36205733793
    country: Hungary
    state: Csongrad
    zipcode: 6725
    city: Szeged
    address: Kormanyos u 11.
  cust_2:
    name: Ildiko
    surname: Farkas
    email: ifarkas@gmail.com
    telephone: 36209269954
    country: Hungary
    state: Csongrad
    zipcode: 6720
    city: Szeged
    address: Martonosi u. 18.


MarkaOrder:
<?php for($i =0; $i< $order_size; $i++): ?>
<?php $icat = mt_rand(0,4) ?>
  order_<?php echo $i ?>:
    Customer: cust_<?php echo mt_rand(0,$users_size)."\n" ?>
    pending: <?php echo (mt_rand(0,1) == 0) ? "true\n" : "false\n" ?>
    shipped: <?php echo (mt_rand(0,1) == 0) ? "true\n" : "false\n" ?>
<?php endfor ?>
  
MarkaOrderDetails:
<?php for($i =0; $i< $order_size*3; $i++): ?>
<?php $iord = mt_rand(0,$order_size-1) ?>
  details_<?php echo $i ?>:
    Order: order_<?php echo $iord."\n" ?>
    Product: product_<?php echo mt_rand(0,$product_size-1)."\n" ?>
    quantity: <?php echo mt_rand(1,10)."\n" ?>
    cadprice: <?php echo mt_rand(10,400)."\n" ?>
<?php endfor ?>