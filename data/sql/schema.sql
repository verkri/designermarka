CREATE TABLE marka_category (id BIGSERIAL, name VARCHAR(100) NOT NULL UNIQUE, slug VARCHAR(100) NOT NULL UNIQUE, PRIMARY KEY(id));
CREATE TABLE marka_color_scheme (id BIGSERIAL, name VARCHAR(100) NOT NULL UNIQUE, slug VARCHAR(100) NOT NULL UNIQUE, PRIMARY KEY(id));
CREATE TABLE marka_home_slider (id BIGSERIAL, filename VARCHAR(255), caption VARCHAR(100) NOT NULL, priority BIGINT DEFAULT 1 NOT NULL, PRIMARY KEY(id));
CREATE TABLE marka_product (id BIGSERIAL, name VARCHAR(50) NOT NULL UNIQUE, slug VARCHAR(50) NOT NULL UNIQUE, category_id BIGINT NOT NULL, colorscheme_id BIGINT NOT NULL, manufactured DATE, token VARCHAR(255) NOT NULL UNIQUE, stockqty BIGINT DEFAULT 1 NOT NULL, cadprice FLOAT NOT NULL, is_active BOOLEAN DEFAULT 'false' NOT NULL, featured BOOLEAN DEFAULT 'false' NOT NULL, description VARCHAR(2000), short VARCHAR(100), created_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE marka_product_image (id BIGSERIAL, filename VARCHAR(255), product_id BIGINT, PRIMARY KEY(id));
ALTER TABLE marka_product ADD CONSTRAINT marka_product_colorscheme_id_marka_color_scheme_id FOREIGN KEY (colorscheme_id) REFERENCES marka_color_scheme(id) ON DELETE RESTRICT NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE marka_product ADD CONSTRAINT marka_product_category_id_marka_category_id FOREIGN KEY (category_id) REFERENCES marka_category(id) ON DELETE RESTRICT NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE marka_product_image ADD CONSTRAINT marka_product_image_product_id_marka_product_id FOREIGN KEY (product_id) REFERENCES marka_product(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
